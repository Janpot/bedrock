{% extends 'layout.html' %}

{% set pageTitle = "Sign In" %}
{% set clientData.pageTitle = "Sign In" %}
{% set pageLayout = "minimal" %}

{% block content %}

{% raw %}
<div data-ng-controller="LoginController as model">

<h2 class="headline">Sign in to {{model.siteTitle}}</h2>

<div class="alert alert-info headline" data-ng-show="model.request">
  Please sign in to complete your request.
</div>

<form class="headline" method="post" action="" data-ng-submit="model.submit()">
  <fieldset>
    <div class="control-group">
      <div data-ng-hide="model.multiple" class="controls">
        <input name="sysIdentifier" type="text" autofocus="autofocus"
          data-ng-model="model.sysIdentifier"
          placeholder="Email" data-ng-disabled="model.loading" />
      </div>

      <div data-ng-show="model.multiple">
        <p class="alert alert-info">
          <strong>Note:</strong>
          Your email address ({{email}}) is associated with multiple
          identities. Please select the identity you'd like to sign in with.
        </p>
        <div class="controls">
          <select name="identity" autofocus="autofocus"
            data-ng-model="identity"
            data-ng-options="value.id as value.label for value in model.choices"
            data-ng-disabled="model.loading">
          </select>
        </div>
      </div>

      <div class="controls">
        <input name="password" type="password" placeholder="Password"
          data-ng-model="model.password" data-ng-disabled="model.loading" />
      </div>

      <div data-spinner="model.loading"
        data-spinner-class="center-spinner"></div>

      <div data-ng-hide="model.loading" class="controls btn-group">
        <button class="btn btn-primary" data-submit-form
          data-ng-disabled="model.loading"><i
          class="icon-signin"></i> Sign In</button>
        <button class="btn btn-primary dropdown-toggle"
          data-toggle="dropdown"
          data-ng-disabled="model.loading">
          <span class="caret"></span>
        </button>
        <div></div>
        <ul class="center dropdown-menu">
          <li>
            <a href="/join">
              <i class="icon-user"></i>
              Create an Identity
            </a>
          </li>
          <li>
            <a href="/session/passcode">
              <i class="icon-refresh"></i>
              Password Reset
            </a>
          </li>
        </ul>
      </div>

      <div data-ng-show="model.error">
        <hr />
        <div class="alert alert-error">{{model.error}}</div>
      </div>
    </div>
  </fieldset>
</form>

</div>
{% endraw %}

{% endblock %}
